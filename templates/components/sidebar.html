<!-- Sidebar -->
<div class="sidebar shadow pt-lg-2">
    <!-- Menu -->
    <ul class="navbar-nav">
        <!-- Dashboard -->
        <li class="nav-item">
            <a class="nav-link" href="{% url 'dashboard:index' %}">
                <i class="fas fa-fw fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
        </li>

        <hr class="sidebar-divider">

        <div class="sidebar-heading">
            Ký túc xá
        </div>

        <!-- Phòng và khu vực -->
        {% if user.user_type == 'admin' or user.user_type == 'staff' %}
            <li class="nav-item">
                <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseDormitory"
                    aria-expanded="false" aria-controls="collapseDormitory">
                    <i class="fas fa-fw fa-building"></i>
                    <span>Quản lý Ký túc xá</span>
                </a>
                <div id="collapseDormitory" class="collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionSidebar">
                    <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'dormitory:building_list' %}">Tòa nhà</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'dormitory:room_type_list' %}">Loại phòng</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'dormitory:room_list' %}">Danh sách phòng</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'dormitory:bed_list' %}">Danh sách giường</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'dormitory:amenity_list' %}">Tiện nghi</a>
                    </div>
                </div>
            </li>
        {% else %}
            <li class="nav-item">
                <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapsePublicDormitory"
                    aria-expanded="false" aria-controls="collapsePublicDormitory">
                    <i class="fas fa-fw fa-building"></i>
                    <span>Thông tin Ký túc xá</span>
                </a>
                <div id="collapsePublicDormitory" class="collapse" aria-labelledby="headingPublicDormitory" data-bs-parent="#accordionSidebar">
                    <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'dormitory:building_public_list' %}">Tòa nhà</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'dormitory:room_type_public_list' %}">Loại phòng</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'dormitory:room_public_list' %}">Danh sách phòng</a>
                    </div>
                </div>
            </li>
        {% endif %}

        <!-- Đăng ký phòng -->
        <li class="nav-item">
            <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseRegistration"
                aria-expanded="false" aria-controls="collapseRegistration">
                <i class="fas fa-fw fa-file-contract"></i>
                <span>Đăng ký phòng</span>
            </a>
            <div id="collapseRegistration" class="collapse" aria-labelledby="headingRegistration" data-bs-parent="#accordionSidebar">
                <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                    {% if user.user_type == 'student' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'registration:apply' %}">Đăng ký mới</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'registration:my_applications' %}">Đơn đăng ký của tôi</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'registration:my_contracts' %}">Hợp đồng của tôi</a>
                    {% elif user.user_type == 'admin' or user.user_type == 'staff' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'registration:period_list' %}">Kỳ đăng ký</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'registration:application_list' %}">Đơn đăng ký</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'registration:contract_list' %}">Hợp đồng</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'registration:check_in_list' %}">Nhận phòng</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'registration:check_out_list' %}">Trả phòng</a>
                    {% endif %}
                </div>
            </div>
        </li>

        <hr class="sidebar-divider">

        <div class="sidebar-heading">
            Tài chính
        </div>

        <!-- Thanh toán và hóa đơn -->
        <li class="nav-item">
            <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapsePayment"
                aria-expanded="false" aria-controls="collapsePayment">
                <i class="fas fa-fw fa-credit-card"></i>
                <span>Thanh toán</span>
            </a>
            <div id="collapsePayment" class="collapse" aria-labelledby="headingPayment" data-bs-parent="#accordionSidebar">
                <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                    {% if user.user_type == 'student' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'payment:my_invoices' %}">Hóa đơn của tôi</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'payment:payment_methods' %}">Thanh toán</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'payment:payment_history' %}">Lịch sử thanh toán</a>
                    {% elif user.user_type == 'admin' or user.user_type == 'staff' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'payment:fee_type_list' %}">Loại phí</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'payment:invoice_list' %}">Quản lý hóa đơn</a>
                    {% endif %}
                </div>
            </div>
        </li>

        <hr class="sidebar-divider">

        <div class="sidebar-heading">
            Dịch vụ
        </div>

        <!-- Bảo trì và sửa chữa -->
        <li class="nav-item">
            <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseMaintenance"
                aria-expanded="false" aria-controls="collapseMaintenance">
                <i class="fas fa-fw fa-tools"></i>
                <span>Bảo trì & Sửa chữa</span>
            </a>
            <div id="collapseMaintenance" class="collapse" aria-labelledby="headingMaintenance" data-bs-parent="#accordionSidebar">
                <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                    {% if user.user_type == 'student' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'maintenance:request_create' %}">Yêu cầu mới</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'maintenance:my_requests' %}">Yêu cầu của tôi</a>
                    {% elif user.user_type == 'admin' or user.user_type == 'staff' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'maintenance:category_list' %}">Danh mục</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'maintenance:request_list' %}">Tất cả yêu cầu</a>
                    {% endif %}
                </div>
            </div>
        </li>

        <!-- Thông báo -->
        <li class="nav-item">
            <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseNotification"
                aria-expanded="false" aria-controls="collapseNotification">
                <i class="fas fa-fw fa-bell"></i>
                <span>Thông báo</span>
            </a>
            <div id="collapseNotification" class="collapse" aria-labelledby="headingNotification" data-bs-parent="#accordionSidebar">
                <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                    <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'notification:list' %}">Thông báo của tôi</a>
                    <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'notification:announcement_list' %}">Thông báo chung</a>
                    {% if user.user_type == 'admin' or user.user_type == 'staff' %}
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'notification:category_list' %}">Danh mục</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'notification:create' %}">Tạo thông báo</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'notification:announcement_create' %}">Tạo thông báo chung</a>
                    {% endif %}
                </div>
            </div>
        </li>

        {% if user.user_type == 'admin' %}
            <hr class="sidebar-divider">

            <div class="sidebar-heading">
                Quản trị
            </div>

            <!-- Quản lý người dùng -->
            <li class="nav-item">
                <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseUsers"
                    aria-expanded="false" aria-controls="collapseUsers">
                    <i class="fas fa-fw fa-users"></i>
                    <span>Quản lý người dùng</span>
                </a>
                <div id="collapseUsers" class="collapse" aria-labelledby="headingUsers" data-bs-parent="#accordionSidebar">
                    <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'accounts:student_list' %}">Sinh viên</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'accounts:staff_list' %}">Nhân viên</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'accounts:user_create' %}">Tạo tài khoản</a>
                    </div>
                </div>
            </li>

            <!-- Thống kê và Báo cáo -->
            <li class="nav-item">
                <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseReports"
                    aria-expanded="false" aria-controls="collapseReports">
                    <i class="fas fa-fw fa-chart-area"></i>
                    <span>Thống kê & Báo cáo</span>
                </a>
                <div id="collapseReports" class="collapse" aria-labelledby="headingReports" data-bs-parent="#accordionSidebar">
                    <div class="bg-white collapse-inner mx-2 rounded d-flex flex-column">
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'dashboard:occupancy_report' %}">Báo cáo lưu trú</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'dashboard:revenue_report' %}">Báo cáo doanh thu</a>
                        <a class="collapse-item pl-3 my-2 ms-2 border-bottom border-2 border-light text-decoration-none" href="{% url 'dashboard:maintenance_report' %}">Báo cáo bảo trì</a>
                    </div>
                </div>
            </li>

            <!-- Thiết lập hệ thống -->
            <li class="nav-item">
                <a class="nav-link" href="{% url 'dashboard:system_settings' %}">
                    <i class="fas fa-fw fa-cogs"></i>
                    <span>Thiết lập hệ thống</span>
                </a>
            </li>
        {% endif %}

        <hr class="sidebar-divider d-none d-md-block">
    </ul>
</div>